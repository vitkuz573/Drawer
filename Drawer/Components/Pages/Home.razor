@page "/"

@rendermode InteractiveServer

@inject IJSRuntime JsRuntime

<PageTitle>Interactive Drawing with D3.js</PageTitle>

<div class="mr-4 flex flex-col space-y-4">
    <div class="flex items-center space-x-4">
        <select @onchange="OnToolChanged" class="rounded border border-gray-300 p-2 shadow-sm">
            <option value="rect">Rectangle</option>
        </select>
        <input type="color" @bind="SelectedColor" class="h-8 w-12 rounded border border-gray-300 p-1 shadow-sm" />
        <label class="flex items-center space-x-2">
            <input type="checkbox" checked="@IsLocked" @onchange="OnLockChanged" class="rounded border-gray-300">
            <span>Lock</span>
        </label>
    </div>
    <svg @ref="_svgElement" width="800" height="600" class="border border-gray-400 bg-white shadow-md"></svg>
</div>

<div class="flex w-96 flex-col space-y-2">
    <textarea @bind="JsonInput" class="h-64 w-full rounded border border-gray-300 p-2 shadow-sm" placeholder="Edit or paste JSON here"></textarea>
</div>

<div id="context-menu">
    <ul>
        <li @onclick="DeleteShape">Delete Selected Shape</li>
        <li @onclick="CustomAction">Custom Action</li>
    </ul>
</div>

<style>
    .resize-handle {
      fill: white;
      stroke: black;
      cursor: pointer;
      shape-rendering: crispEdges;
    }
    .selection-box {
        fill: none;
        stroke: gray;
        stroke-dasharray: 4;
        shape-rendering: crispEdges;
        pointer-events: none;
    }
    .line-selection {
      stroke: gray;
      stroke-dasharray: 4;
      shape-rendering: crispEdges;
    }
    .handle-line {
      fill: white;
      stroke: black;
      cursor: pointer;
      shape-rendering: crispEdges;
    }
    .selected {
      stroke: blue;
      stroke-width: 2;
    }
    #context-menu {
      position: absolute;
      background-color: white;
      border: 1px solid #ccc;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      display: none;
      z-index: 1000;
      min-width: 150px;
      border-radius: 4px;
    }
    #context-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    #context-menu li {
      padding: 8px 12px;
      cursor: pointer;
    }
    #context-menu li:hover {
      background-color: #f0f0f0;
    }
</style>
